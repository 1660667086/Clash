mixed-port: 7890
allow-lan: true
mode: Rule
log-level: info
ipv6: true

# ===== TUN =====
tun:
  enable: true
  stack: mixed
  auto-route: true
  auto-detect-interface: true
  exclude-route:
    - 10.0.0.0/8
    - 100.64.0.0/10
    - 127.0.0.0/8
    - 169.254.0.0/16
    - 172.16.0.0/12
    - 192.168.0.0/16

# ===== DNS =====
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - localhost
    - '*.cn'
  nameserver:
    - 223.5.5.5
    - 119.29.29.29

# ===== Proxies（已改为 Shadowsocks + obfs）=====
proxies:
  - name: My-Shadowsocks-Server
    type: ss
    server: 192.243.115.105
    port: 50090
    cipher: aes-256-gcm
    password: 11
    plugin: obfs
    plugin-opts:
      mode: http
      host: cloudfront.com
    udp: true

# ===== Proxy Groups =====
proxy-groups:
  - name: Proxy
    type: select
    proxies:
      - My-Shadowsocks-Server
      - DIRECT

# ===== Rules =====
rules:

  # ===== LAN =====
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT

  # ===== China =====
  - GEOIP,CN,DIRECT

  # ===== WhatsApp（完整）=====
  - DOMAIN-SUFFIX,whatsapp.com,Proxy
  - DOMAIN-SUFFIX,whatsapp.net,Proxy
  - DOMAIN-SUFFIX,wa.me,Proxy
  - DOMAIN-SUFFIX,fbcdn.net,Proxy
  - DOMAIN-SUFFIX,facebook.net,Proxy
  - IP-CIDR,31.13.64.0/18,Proxy,no-resolve
  - IP-CIDR,66.220.144.0/20,Proxy,no-resolve
  - IP-CIDR,69.63.176.0/20,Proxy,no-resolve
  - IP-CIDR,157.240.0.0/16,Proxy,no-resolve
  - IP-CIDR,173.252.64.0/18,Proxy,no-resolve
  - IP-CIDR,179.60.192.0/22,Proxy,no-resolve
  - IP-CIDR,185.60.216.0/22,Proxy,no-resolve

  # ===== Telegram =====
  - DOMAIN-SUFFIX,t.me,Proxy
  - DOMAIN-SUFFIX,tdesktop.com,Proxy
  - DOMAIN-SUFFIX,telegra.ph,Proxy
  - DOMAIN-SUFFIX,telegram.me,Proxy
  - DOMAIN-SUFFIX,telegram.org,Proxy
  - IP-CIDR,91.108.4.0/22,Proxy,no-resolve
  - IP-CIDR,91.108.8.0/22,Proxy,no-resolve
  - IP-CIDR,91.108.12.0/22,Proxy,no-resolve
  - IP-CIDR,91.108.16.0/22,Proxy,no-resolve
  - IP-CIDR,149.154.160.0/20,Proxy,no-resolve

  # ===== ChatGPT / OpenAI =====
  - DOMAIN-SUFFIX,openai.com,Proxy
  - DOMAIN-SUFFIX,oaistatic.com,Proxy
  - DOMAIN-SUFFIX,oaiusercontent.com,Proxy
  - DOMAIN-KEYWORD,openai,Proxy

  # ===== Google / Blocked =====
  - DOMAIN-KEYWORD,google,Proxy
  - DOMAIN-SUFFIX,youtube.com,Proxy
  - DOMAIN-SUFFIX,github.com,Proxy
  - DOMAIN-SUFFIX,cloudflare.com,Proxy
  - DOMAIN-SUFFIX,amazonaws.com,Proxy

  # ===== Final =====
  - MATCH,Proxy

